# ServiceNow CI/CD GitHub Action for Publish Application

Publishes the specified application and all of its artifacts to the application repository.

# Usage
## Step 1: Collect the data from ServiceNow
Collect all required data from the ServiceNow - username, password, instance, application sys_id or scope
## Step 2: Configure Secrets in your GitHub repository
On GitHub, go in your repository settings, click on the secret _Secrets_ and create a new secret.

Create secrets called 
- `SNOW_USERNAME`
- `SNOW_PASSWORD`
- `SNOW_SOURCE_INSTANCE` **domain** only required from the url like https://**domain**.service-now.com
- `APP_SYS_ID` or `APP_SCOPE`

## Step 3: Configure the GitHub action
```yaml
- name: Publish Application 
  id: publish_app # id of the step
  uses: ServiceNow/sncicd_publish_app@1.0 # like username/repo-name
  with:
      version: "x.x.x"
      versionTemplate: "x.x"
      devNotes: "string"
      versionFormat: exact
  env:
    snowUsername: ${{ secrets.SNOW_USERNAME }}
    snowPassword: ${{ secrets.SNOW_PASSWORD }}
    snowSourceInstance: ${{ secrets.SNOW_SOURCE_INSTANCE }}
    appSysID: ${{ secrets.APP_SYS_ID }}
    appScope: ${{ secrets.APP_SCOPE }}
```
Inputs:
- **version** - Application version to publish. Only for "exact" version format is required
- **devNotes** - Developer notes to store with the application.
- **versionTemplate** - Version template ( like 2.4 ).
- **versionFormat** - exact, detect, autodetect, template
    - **exact** - Use exact version from the input **version** variable
    - **template** - Use x.y.z version where x.y is entered in field below and z is autogenerated
    - **detect** - Try to detect the version from sources. Will fail if no sources found.
    - **autodetect** - Detect the currently installed version and increment it
    
Outputs:
- **rollbackVersion** - The previously installed version.
- **newVersion** - Incremented version. Used to install application step.
    
Environment variable should be set up in the Step 1
- snowUsername - Username to ServiceNow instance
- snowPassword - Password to ServiceNow instance
- snowSourceInstance ServiceNow instance where application is developing
- appSysID - Required if app_scope is not specified. The sys_id of the application
- appScope - Required if app_sys_id is not specified. The scope name of the application, such as x_aah_custom_app

## Tests

Tests should be ran via npm commands:

#### Unit tests
```shell script
npm run test
```   

#### Integration test
```shell script
npm run integration
```   

## Build

```shell script
npm run buid
```

## Formatting and Linting
```shell script
npm run format
npm run lint
```

## Support Model

ServiceNow built this integration with the intent to help customers get started faster in adopting CI/CD APIs for DevOps workflows, but __will not be providing formal support__. This integration is therefore considered "use at your own risk", and will rely on the open-source community to help drive fixes and feature enhancements via Issues. Occasionally, ServiceNow may choose to contribute to the open-source project to help address the highest priority Issues, and will do our best to keep the integrations updated with the latest API changes shipped with family releases. This is a good opportunity for our customers and community developers to step up and help drive iteration and improvement on these open-source integrations for everyone's benefit. 
